@model Product
@{
    var userId = Context.Session.GetInt32("UserId");
    var userName = Context.Session.GetString("UserName") ?? "";
    var userAddress = Context.Session.GetString("UserAddress") ?? "";
    var userPhone = Context.Session.GetString("UserPhone") ?? "";
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@Model.Name</title>
    <link rel="stylesheet" href="~/lib/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css">
    <style>
        .product-image {
            width: 100%;
            border-radius: 5px;
        }

        .size-option {
            border: 1px solid #ccc;
            padding: 8px 12px;
            margin-right: 5px;
            display: inline-block;
        }

            .size-option:first-child {
                border: 2px solid red; /* Chọn mặc định */
            }

        .star {
            color: orange;
            font-size: 15px;
        }

        .tick {
            font-size: 16px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <!-- Ảnh sản phẩm -->
            <div class="col-lg-6 col-md-12 text-center">
                <img src="@Model.ImageUrl" class="img-fluid product-image">
            </div>

            <!-- Mô tả sản phẩm -->
            <div class="col-lg-6 col-md-12">
                <h2>@Model.Name</h2>
                <p class="text-muted">Mã sản phẩm: @Model.Description</p>

                <!-- Đánh giá sao -->
                <div class="mb-2">
                    <span class="star"><i class="bi bi-star-fill"></i></span>
                    <span class="star"><i class="bi bi-star-fill"></i></span>
                    <span class="star"><i class="bi bi-star-fill"></i></span>
                    <span class="star"><i class="bi bi-star-fill"></i></span>
                    <span class="star text-muted"><i class="bi bi-star"></i></span>
                    <span>(987 lượt đánh giá)</span>
                </div>

                <!-- Giá -->
                <h4 class="text-danger">@Model.Price.ToString("N0") đ</h4>

                <!-- Chọn kích thước -->
                <div class="mt-3">
                    <h6>Kích thước:</h6>
                    <div class="d-flex flex-wrap">
                        <span class="size-option">39</span>
                        <span class="size-option">40</span>
                        <span class="size-option">41</span>
                        <span class="size-option">42</span>
                        <span class="size-option">43</span>
                    </div>
                </div>

                <!-- Nút hành động -->
                <div class="mt-4 text-center text-md-start">
                    <button class="btn btn-danger btn-lg me-3" onclick="showOrderForm()">Mua ngay</button>
                    <button class="btn btn-outline-danger btn-lg" onclick="addToCart(@Model.Id)">
                        <i class="bi bi-cart4"></i> Thêm vào giỏ hàng
                    </button>
                </div>

                <!-- Thông tin khác -->
                <ul class="mt-4 list-unstyled">
                    <li><i class="bi bi-check-circle tick"></i> Bảo hành keo vĩnh viễn</li>
                    <li><i class="bi bi-truck tick"></i> Miễn phí vận chuyển đơn hàng từ 150k</li>
                    <li><i class="bi bi-arrow-left-right tick"></i> Đổi trả dễ dàng trong 7 ngày</li>
                </ul>
            </div>
            <!-- Form đặt hàng -->
            <div id="orderForm" style="display: none; margin-top: 20px;">
                <h5>Thông tin đặt hàng</h5>
                <form method="post" action="/Order/PlaceOrder">
                    <input type="hidden" name="UserId" value="@userId">
                    <input type="hidden" name="ProductId" value="@Model.Id">
                    <input type="hidden" name="Price" value="@Model.Price">
                    <div class="mb-3">
                        <label>Họ tên</label>
                        <input type="text" name="Name" class="form-control" value="@userName" required>
                    </div>
                    <div class="mb-3">
                        <label>Địa chỉ</label>
                        <input type="text" name="Address" class="form-control" value="@userAddress" required>
                    </div>
                    <div class="mb-3">
                        <label>Số điện thoại</label>
                        <input type="text" name="Phone" class="form-control" value="@userPhone" required>
                    </div>
                    <div class="mb-3">
                        <label>Phương thức thanh toán:</label><br>
                        <input type="radio" name="PaymentMethod" value="COD" checked> Thanh toán khi nhận hàng
                        <input type="radio" name="PaymentMethod" value="Bank"> Chuyển khoản
                    </div>
                    <button type="submit" class="btn btn-success">Đặt hàng</button>
                </form>
            </div>
        </div>

    </div>

    <script>
        function showOrderForm() {
            document.getElementById('orderForm').style.display = 'block';
        }

        function addToCart(productId) {
            fetch(`/Cart/AddToCart?productId=${productId}`)
                .then(response => response.json())
                .then(data => alert(data.message))
                .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>
